---
title: "Get started"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Get started}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(collapse = TRUE,
                      comment  = "#>")
```

# Overview

# Installation

`exactt` is hosted on GitHub at https://github.com/ian-xu-economics/exactt/. It can be installed using the install_github() function in the remotes package:
```{r}
remotes::install_github("ian-xu-economics/exactt")
```

# Attaching `exactt`

After installing `exactt`, we can attach the package to our session using the base `library()` function:
```{r}
library("exactt")
```

# An Exact $t$-Test

Description. The main function is exactt(). It handles IV and regular case... Accepts standard formula.

# Illustration: Regress `Wind` on `Temp` and `Month`.

To demonstrate the *exactt* package, we use data of daily air quality measurements in New York found in `datasets::airquality`. We'll  investigate the relationship between temperature (degrees F) and month (1--12) on wind (mph). 

```{r}
summary(datasets::airquality[c("Wind", "Temp", "Month")])
```

We can plug `exactt()` using standard formula notation. If we don't specify any additional parameters, then by default, the number of blocks used (nBlocks) equals 5 and the level of significance ($\alpha$) equals 0.05. 
```{r}
exactt1 <- exactt(Wind ~ Temp + Month,
                  data = datasets::airquality)
exactt1
```

If *tidyverse*, *latex2exp* are installed, we can also use the `exacttPlot()` function by plugging in the result from calling `exactt()`. The `exacttPlot()` function plots the p-value against $\beta^0$. 
```{r}
exacttPlot(exactt1)
```

## Interest in Coefficients for Specific Variables

Suppose we are only interested in the coefficient on the first variable (Temp), then we can set `variables` equal to 1. Likewise, if we are interested in the coefficient on the second variable (Month), then we can set `variables` equal to 2. 
```{r}
exactt2 <- exactt(Wind ~ Temp + Month,
                  data = datasets::airquality,
                  variables = 1)

exactt2
```
Note that the 95% confidence interval is equal to the case where all variables are of interest because these confidence intervals are marginally valid.

# Optimizing the Ordering

The confidence interval generated using the `exactt()` function is dependent on the ordering of the data. Some orderings will achieve better power on average than other orderings. Furthermore, when sample size is small, and the number of blocks is large, optimization will have a larger effect on average. `exactt()` uses the genetic algorithm via the GA algorithm to find the best ordering on average. We only look at the X variables.

If optimization is desired, we can set `optimize` to `TRUE`. We can also pass through whatever other parameters that the `GA::ga()` function normally accepts. For instance, we can set `maxiter = 25`, `parallel = TRUE`, and `seed = 2024`. Note that if optimize is `FALSE` and the other parameters are still passed through, optimization will _not_ be performed.

```{r}
exactt3 <- exactt(Wind ~ Temp + Month,
                  data = datasets::airquality,
                  variables = 1,
                  optimize = TRUE,
                  maxiter = 25,
                  parallel = TRUE,
                  seed = 2024)

exactt3
```
It is important to remember that we only optimize the ordering of the data based on the covariates, so optimizing only increases power on average. It is possible that optimizing the ordering of the data increases the width of the confidence interval compared to the original order.


